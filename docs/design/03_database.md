# DB定義（設計）

## 概要

Discord2Htmlで使用するデータベースの定義と設定について記載します。
データベースはDiscordの会話履歴を永続化し、HTML生成のためのソースデータとして利用します。

## データベース設定項目（config） 

以下の項目を設定ファイルで定義可能とします：

- ホスト名
- ポート番号
- データベース名
- ユーザー名
- パスワード
- 最大接続数
- タイムアウト設定

## テーブル定義

### ギルドテーブル
- ギルドID (PK)
- ギルド名
- 参加日時
- 匿名更新サイクル
- 定期実行時刻1 (UTC)
- 定期実行時刻2 (UTC)
- 定期実行時刻3 (UTC)
- 定期実行時刻4 (UTC)

### チャンネルテーブル
- チャンネルID (PK)
- ギルドID (FK)
- チャンネル名

### チャンネルログテーブル
定期バッチおよび設定変更のログテーブル

- チャンネルID (PK)
- タイムスタンプ (PK)
- 変更記録Flg
- 収集設定

### ユーザーテーブル

- ユーザーID (PK)
- ギルドID (FK)
- ユーザー名
- ニックネーム
- アバター情報
- ロール
- 匿名化除外Flg

### ロールテーブル

- ロールID
- 匿名化Flg
